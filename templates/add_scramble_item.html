<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>➕ เพิ่มประโยค Scramble</title>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {font-family:'Prompt',sans-serif;background:#eef6ff;padding:40px;margin:0;display:flex;justify-content:center;}
    .container{max-width:650px;width:100%;background:#fff;padding:30px;border-radius:16px;box-shadow:0 6px 16px rgba(0,0,0,.1);}
    h2{text-align:center;color:#1e4e8c;margin-bottom:20px;}
    label{font-weight:600;margin-bottom:6px;display:block;}
    textarea,select,input[type=text]{width:100%;padding:10px;border:1px solid #cfe6ff;border-radius:10px;margin-bottom:15px;font-size:1rem;}
    .preview{margin-top:15px;padding:12px;border:1px dashed #90caf9;border-radius:10px;background:#f9fcff;}
    .chip{display:inline-block;background:#e3f2fd;padding:6px 12px;margin:4px;border-radius:20px;font-weight:500;}
    button{padding:12px 18px;border:none;border-radius:12px;font-weight:600;cursor:pointer;}
    .btn-submit{width:100%;background:#2b6cb0;color:#fff;font-size:1.1rem;}
    .btn-submit:hover{background:#1e4e8c;}
  </style>
</head>
<body>
  <div class="container">
    <h2>➕ เพิ่มประโยค Scramble</h2>
    <form method="POST">
      <label>ภาษา:</label>
      <select id="lang" name="lang">
        <option value="en">อังกฤษ</option>
        <option value="zh">จีน</option>
      </select>

      <label>พิมพ์ประโยค:</label>
<textarea id="sentence" name="sentence" rows="3" placeholder="อังกฤษ: I am a student.&#10;จีน: 你(nǐ เธอ)||是(shì เป็น)||中国人(zhōngguó rén คนจีน)||吗(ma ไหม?)"></textarea>

      <!-- preview คำที่ถูกแยก -->
      <div class="preview" id="preview"></div>

      <!-- ช่อง hidden เอาไว้ส่งไป Flask -->
      <div id="hiddenInputs"></div>

      <button type="submit" class="btn-submit">✅ บันทึก</button>
    </form>
  </div>

  <script>
    const sentenceEl = document.getElementById("sentence");
    const langEl = document.getElementById("lang");
    const preview = document.getElementById("preview");
    const hiddenInputs = document.getElementById("hiddenInputs");

    function updatePreview(){
      const lang = langEl.value;
      let raw = sentenceEl.value.trim();
      let words = [];

      if(lang === "en"){
        // แยกด้วย space
        words = raw.split(/\s+/);
      } else {
        // แยกด้วย ||
        words = raw.split("||");
      }

      // ล้างก่อน
      preview.innerHTML = "";
      hiddenInputs.innerHTML = "";

      words.forEach(w=>{
        if(w){
          // แสดง chip preview
          const span = document.createElement("span");
          span.className = "chip";
          span.textContent = w.trim();
          preview.appendChild(span);

          // สร้าง hidden input
          const input = document.createElement("input");
          input.type = "hidden";
          input.name = "words[]";
          input.value = w.trim();
          hiddenInputs.appendChild(input);
        }
      });
    }

    // อัปเดตทุกครั้งที่พิมพ์
    sentenceEl.addEventListener("input", updatePreview);
    langEl.addEventListener("change", updatePreview);
  </script>
</body>
</html>
